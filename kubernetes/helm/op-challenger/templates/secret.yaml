apiVersion: v1
kind: Secret
metadata:
  name: {{ include "op-challenger.fullname" . }}-secrets
  labels:
    {{- include "op-challenger.labels" . | nindent 4 }}
  annotations:
    # This secret should be managed by External Secrets Operator or Vault in production
    vault.hashicorp.com/agent-inject: "true"
    vault.hashicorp.com/role: "op-challenger"
    vault.hashicorp.com/agent-inject-secret-private-key: "secret/data/jeju/{{ .Release.Namespace }}/op-challenger"
    vault.hashicorp.com/agent-inject-template-private-key: |
      {{`{{- with secret "secret/data/jeju/`}}{{ .Release.Namespace }}{{`/op-challenger" -}}
      {{ .Data.data.privateKey }}
      {{- end }}`}}
type: Opaque
data:
  # WARNING: This is a placeholder. In production, use Vault or External Secrets Operator
  private-key: {{ .Values.config.privateKey | default "" | b64enc | quote }}

